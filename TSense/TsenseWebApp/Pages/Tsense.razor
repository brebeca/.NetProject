@page "/"
@using TsenseWebApp.Data

@inject TweetService TService
@inject MLService MService

<h3>Tsense</h3>

<EditForm Model="@tweet" OnSubmit="@OnSubmitLink">
    <p>
        <label for="link">Link catre postare: </label>
        <InputText id="link" @bind-Value="tweet.Link" />
    </p>
    <button class="btn-primary" type="submit">Submit</button>
</EditForm>
<br />
<EditForm Model="@tweet" OnSubmit="@OnSubmitText">
    <p>
        <label for="text">Text: </label>
        <InputText id="text" @bind-Value="text" />
    </p>
    <button class="btn-secondary" type="submit">Submit</button>
</EditForm>

<div id="tweet">
    <span id="result">@result</span>
</div>

<div id="text">
    <span id="result">@text</span>
</div>

<div id="sentiment">
    <span id="result-sentiment">@sentiment</span>
</div>


@code {

    Tweet tweet = new Tweet();

    string result;

    string text;
    string sentiment;

    protected async Task OnSubmitLink()
    {
        result = await TService.GetTextFromTweet(tweet.Link);
        sentiment = await MService.SentimentFromLink(result);
    }

    protected async Task OnSubmitText()
    {
        sentiment = await MService.SentimentFromText(text);
    }

}
